# БОЛЬШИЕ ЧАСТИ ПРОЕКТА (ДЛЯ ПОЭТАПНОГО ТЕСТИРОВАНИЯ)

## Этап 1: Настройка проекта и базы данных
- [x] Создать модели данных (Order, Client, Master, ActivityLog, Parts и т.д.)
- [x] Настроить ApplicationDbContext и подключение к БД (PostgreSQL)
- [x] Создать миграции и обновить базу данных (база уже существует с таблицами)
- [x] Организовать архитектуру папок (/Pages/Shared, /Pages/RoleSelection, /Pages/Client, /Pages/Manager, /Pages/Master, /Pages/Common)
- [x] Тестирование: запуск приложения, проверка подключения к БД

## Этап 2: Стартовая страница и выбор роли
- [x] Реализовать страницу выбора роли с кнопками "Войти как Клиент/Менеджер/Мастер"
- [x] Добавить сохранение роли в Session/TempData и перенаправление на Dashboard
- [x] Тестирование: выбор роли, перенаправление, отображение соответствующего интерфейса

## Этап 3: Интерфейс для Клиента
- [x] Создать страницу "Мои заказы" с таблицей и фильтрацией
- [x] Создать страницу "Просмотр заказа" с кнопками согласия/отказа/предоплаты
- [x] Реализовать логику действий клиента (согласие, отказ, оплата)
- [x] Тестирование: создание тестовых заказов, действия клиента, проверка статусов

## Этап 4: Интерфейс для Менеджера
- [x] Создать страницу "Список заказов" с фильтрами и кнопками
- [x] Создать страницу "Создание заказа" с полями и кнопками
- [x] Создать страницу "Просмотр/управление заказом" с вкладками и кнопками
- [x] Создать страницу "Управление клиентами" с добавлением/редактированием
- [x] Реализовать логику менеджера (назначение мастера, отправка стоимости, фиксация согласия и т.д.)
- [x] Тестирование: полный цикл создания и управления заказом, управление клиентами

## Этап 5: Интерфейс для Мастера
- [x] Создать страницу "Мои заказы" с фильтрацией по мастеру
- [x] Создать страницу "Просмотр заказа" с вкладками диагностики и ремонта
- [x] Реализовать логику диагностики (ввод проблем, стоимости, отправка менеджеру)
- [x] Реализовать логику ремонта (добавление деталей, завершение ремонта)
- [x] Тестирование: диагностика и ремонт заказов, проверка статусов и деталей

## Этап 6: Логирование и финальные доработки
- [x] Реализовать ActivityLog для всех изменений статуса/данных
- [x] Добавить валидацию и обработку ошибок
- [x] Определить и реализовать рабочий процесс статусов заказов
- [x] Финальное тестирование всех функциональностей

# TODO ЛИСТ ПО ПЛАНУ РАЗРАБОТКИ ВЕБ-ПРИЛОЖЕНИЯ (RAZOR PAGES) ДЛЯ МАСТЕРСКОЙ ПО РЕМОНТУ КОМПЬЮТЕРОВ

## 1. Общая концепция
- [ ] Реализовать веб-приложение на Razor Pages
- [ ] Создать единый интерфейс с отображением по ролям: Клиент / Менеджер / Мастер
- [ ] Добавить стартовую страницу выбора роли (без авторизации)
- [ ] Обеспечить простую, минималистичную структуру, соответствующую use-case диаграмме

## 2. Стартовая страница
- [ ] Создать страницу с тремя кнопками: "Войти как Клиент", "Войти как Менеджер", "Войти как Мастер"
- [ ] Реализовать сохранение выбранной роли в Session или TempData
- [ ] Добавить перенаправление на соответствующий Dashboard после выбора роли

## 3. Интерфейс для Клиента
- [ ] Создать страницу "Мои заказы" с таблицей заказов (фильтрация по телефону/email, столбцы: №, устройство, статус, стоимость, действия)
- [ ] Создать страницу "Просмотр заказа" с состоянием заказа (диагностика, проблемы, стоимость)
- [ ] Добавить кнопки: "Согласиться на ремонт", "Отказаться от ремонта", "Внести предоплату"
- [ ] Реализовать подтверждение отказа

## 4. Интерфейс для Менеджера
- [ ] Создать страницу "Список заказов" с таблицей (№, клиент, устройство, статус, мастер, дата) и кнопками "Создать заказ", "Открыть"
- [ ] Добавить фильтры по статусу и клиенту
- [ ] Создать страницу "Создание заказа" с полями: клиент (выпадающий + добавить), тип устройства, модель, проблема, примечание
- [ ] Добавить кнопки: "Создать заказ (на диагностику)", "Создать заказ (сразу на ремонт)"
- [ ] Создать страницу "Просмотр / управление заказом" с вкладками:
  - Вкладка 1: Основное (клиент, устройство, статус, мастер, диагностика, кнопки: назначить мастера, отправить стоимость, отметить согласие/отказ, записать оплату)
  - Вкладка 2: Детали ремонта (только просмотр: детали, стоимость)

## 5. Интерфейс для Мастера
- [ ] Создать страницу "Мои заказы" с заказами, назначенными мастеру (столбцы: №, клиент, устройство, статус, дата)
- [ ] Создать страницу "Просмотр заказа" с вкладками:
  - Вкладка 1: Диагностика (поля для проблем, работ, стоимости, предоплаты; кнопка "Отправить диагностику"; после отправки read-only)
  - Вкладка 2: Ремонт (список деталей, добавить деталь, завершить ремонт; после завершения read-only)

## 6. Страница "Управление клиентами"
- [ ] Создать страницу только для менеджера со списком клиентов
- [ ] Добавить кнопки "Добавить клиента", "Редактировать" (без удаления)

## 7. Логирование действий
- [ ] Реализовать ActivityLog (orderID, empID/managerID, timestamp, action) при изменении статуса или данных заказа

## 8. Архитектура Razor Pages
- [ ] Организовать папки: /Pages/Shared, /Pages/RoleSelection, /Pages/Client, /Pages/Manager, /Pages/Master, /Pages/Common
- [ ] Обеспечить общий доступ к данным для всех ролей

## 9. Рабочий процесс заказа (состояния)
- [ ] Определить статусы: "Принят от клиента", "Ожидает диагностики", "Ожидает согласия клиента", "Клиент согласился", "Клиент отказался", "В процессе ремонта", "Ремонт завершён"
- [ ] Реализовать изменение статусов через менеджера и мастера

## 10. Минимальный набор страниц (9 страниц)
- [ ] 1. Выбор роли
- [ ] 2. Клиент: список заказов
- [ ] 3. Клиент: просмотр заказа
- [ ] 4. Менеджер: список заказов
- [ ] 5. Менеджер: создание заказа
- [ ] 6. Менеджер: просмотр заказа
- [ ] 7. Менеджер: управление клиентами
- [ ] 8. Мастер: список заказов
- [ ] 9. Мастер: просмотр заказа

## Дополнительные задачи
- [ ] Настроить базу данных (модели: Order, Client, Master, ActivityLog, Parts и т.д.)
- [ ] Реализовать модели данных и DbContext
- [ ] Добавить валидацию и обработку ошибок
- [ ] Протестировать все функциональности
- [ ] Документировать код
